# monitoring.yaml — Python 监控/日志/计时 → Wolfram Language 映射规则（~25 条）
# 覆盖：tqdm、logging、time、memory_profiler、psutil、warnings

# ═══════════════════════════════════════════════════════
#  1. 计时 Timing
# ═══════════════════════════════════════════════════════

- python_path: time.time
  wolfram_function: AbsoluteTime
  input_converter: to_wl_passthrough
  output_converter: from_wl_scalar
  tags: [time, timing, monitoring]
  description: "Current timestamp (WL: AbsoluteTime) 当前时间戳"

- python_path: time.perf_counter
  wolfram_function: AbsoluteTime
  input_converter: to_wl_passthrough
  output_converter: from_wl_scalar
  tags: [perf_counter, timing, monitoring]
  description: "High-resolution timer 高精度计时器"

- python_path: time.sleep
  wolfram_function: Pause
  input_converter: to_wl_scalar
  output_converter: from_wl_passthrough
  tags: [sleep, pause, timing]
  description: "Sleep/pause execution (WL: Pause) 暂停执行"

- python_path: timeit.timeit
  wolfram_function: AbsoluteTiming
  input_converter: to_wl_passthrough
  output_converter: from_wl_scalar
  tags: [timeit, benchmark, timing, performance]
  description: "Benchmark expression (WL: AbsoluteTiming) 基准计时"

# ═══════════════════════════════════════════════════════
#  2. 内存监控
# ═══════════════════════════════════════════════════════

- python_path: psutil.Process.memory_info
  wolfram_function: MemoryInUse
  input_converter: to_wl_passthrough
  output_converter: from_wl_scalar
  tags: [memory, monitoring, psutil]
  description: "Memory usage (WL: MemoryInUse) 内存使用量"

- python_path: psutil.virtual_memory
  wolfram_function: MemoryInUse
  input_converter: to_wl_passthrough
  output_converter: from_wl_scalar
  tags: [memory, virtual, psutil, monitoring]
  description: "Virtual memory info 虚拟内存信息"

- python_path: psutil.cpu_count
  wolfram_function: "$ProcessorCount"
  input_converter: to_wl_passthrough
  output_converter: from_wl_scalar
  tags: [cpu, count, psutil, monitoring]
  description: "CPU count (WL: $ProcessorCount) CPU核心数"

- python_path: psutil.cpu_percent
  wolfram_function: "$ProcessorCount"
  input_converter: to_wl_passthrough
  output_converter: from_wl_scalar
  tags: [cpu, percent, psutil, monitoring]
  description: "CPU usage percent CPU使用率"

# ═══════════════════════════════════════════════════════
#  3. 日志 Logging
# ═══════════════════════════════════════════════════════

- python_path: logging.info
  wolfram_function: "PrintTemporary"
  input_converter: to_wl_string
  output_converter: from_wl_passthrough
  tags: [logging, info, monitoring]
  description: "Log info message (WL: PrintTemporary) 日志信息"

- python_path: logging.warning
  wolfram_function: "Message[General::warn, #]&"
  input_converter: to_wl_string
  output_converter: from_wl_passthrough
  tags: [logging, warning, monitoring]
  description: "Log warning (WL: Message) 日志警告"

- python_path: logging.error
  wolfram_function: "Message[General::error, #]&"
  input_converter: to_wl_string
  output_converter: from_wl_passthrough
  tags: [logging, error, monitoring]
  description: "Log error (WL: Message error) 日志错误"

- python_path: logging.debug
  wolfram_function: "If[$Assumptions, PrintTemporary[#]]&"
  input_converter: to_wl_string
  output_converter: from_wl_passthrough
  tags: [logging, debug, monitoring]
  description: "Debug log (WL: conditional PrintTemporary) 调试日志"

- python_path: warnings.warn
  wolfram_function: "Message[General::warn, #]&"
  input_converter: to_wl_string
  output_converter: from_wl_passthrough
  tags: [warnings, warn, monitoring]
  description: "Issue warning (WL: Message) 发出警告"

# ═══════════════════════════════════════════════════════
#  4. 进度条 Progress
# ═══════════════════════════════════════════════════════

- python_path: tqdm.tqdm
  wolfram_function: "Monitor[#, ProgressIndicator[Appearance->\"Percolator\"]]&"
  input_converter: to_wl_passthrough
  output_converter: from_wl_passthrough
  tags: [tqdm, progress, monitoring]
  description: "Progress bar (WL: Monitor + ProgressIndicator) 进度条"

- python_path: tqdm.auto.tqdm
  wolfram_function: "Monitor[#, ProgressIndicator[Appearance->\"Necklace\"]]&"
  input_converter: to_wl_passthrough
  output_converter: from_wl_passthrough
  tags: [tqdm, progress, auto, monitoring]
  description: "Auto progress bar (WL: Monitor) 自动进度条"

# ═══════════════════════════════════════════════════════
#  5. 断言与错误处理
# ═══════════════════════════════════════════════════════

- python_path: builtins.assert
  wolfram_function: Assert
  input_converter: to_wl_passthrough
  output_converter: from_wl_passthrough
  tags: [assert, error, debugging]
  description: "Assert condition (WL: Assert) 断言"

- python_path: contextlib.suppress
  wolfram_function: "Quiet[#]&"
  input_converter: to_wl_passthrough
  output_converter: from_wl_passthrough
  tags: [suppress, quiet, error handling]
  description: "Suppress exceptions (WL: Quiet) 静默异常"

# ═══════════════════════════════════════════════════════
#  6. 性能分析
# ═══════════════════════════════════════════════════════

- python_path: cProfile.run
  wolfram_function: "AbsoluteTiming[Trace[#]]&"
  input_converter: to_wl_passthrough
  output_converter: from_wl_passthrough
  tags: [profile, cprofile, performance, monitoring]
  description: "Profile execution (WL: AbsoluteTiming + Trace) 执行分析"

- python_path: line_profiler.LineProfiler
  wolfram_function: "AbsoluteTiming"
  input_converter: to_wl_passthrough
  output_converter: from_wl_scalar
  tags: [line profiler, performance, monitoring]
  description: "Line-by-line profiling (WL: AbsoluteTiming) 逐行分析"

- python_path: memory_profiler.profile
  wolfram_function: "MaxMemoryUsed"
  input_converter: to_wl_passthrough
  output_converter: from_wl_scalar
  tags: [memory profiler, memory, monitoring]
  description: "Memory profiler (WL: MaxMemoryUsed) 内存分析"

# ═══════════════════════════════════════════════════════
#  7. 日期时间
# ═══════════════════════════════════════════════════════

- python_path: datetime.datetime.now
  wolfram_function: Now
  input_converter: to_wl_passthrough
  output_converter: from_wl_passthrough
  tags: [datetime, now, time]
  description: "Current datetime (WL: Now) 当前日期时间"

- python_path: datetime.datetime.strftime
  wolfram_function: DateString
  input_converter: to_wl_passthrough
  output_converter: from_wl_passthrough
  tags: [datetime, format, string]
  description: "Format datetime as string (WL: DateString) 格式化日期"

- python_path: datetime.timedelta
  wolfram_function: Quantity
  input_converter: to_wl_scalar
  output_converter: from_wl_passthrough
  tags: [timedelta, duration, datetime]
  description: "Time duration (WL: Quantity seconds) 时间差"

- python_path: time.strftime
  wolfram_function: DateString
  input_converter: to_wl_passthrough
  output_converter: from_wl_passthrough
  tags: [strftime, format, time]
  description: "Format time string (WL: DateString) 格式化时间字符串"
