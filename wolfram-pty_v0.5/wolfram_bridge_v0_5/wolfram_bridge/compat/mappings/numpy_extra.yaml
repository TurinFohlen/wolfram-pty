# numpy_extra.yaml — NumPy 补充映射（~55 条）
# 覆盖 numpy.yaml 未收录的：集合运算/类型检查/多项式/直方图/窗函数/位运算/高级索引等

# ═══════════════════════════════════════════════════════
#  1. 集合运算
# ═══════════════════════════════════════════════════════

- python_path: numpy.union1d
  wolfram_function: Union
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_numpy
  tags: [union, set, numpy]
  description: "Set union 集合并集"

- python_path: numpy.intersect1d
  wolfram_function: Intersection
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_numpy
  tags: [intersect, set, numpy]
  description: "Set intersection 集合交集"

- python_path: numpy.setdiff1d
  wolfram_function: Complement
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_numpy
  tags: [setdiff, difference, set, numpy]
  description: "Set difference 集合差集"

- python_path: numpy.setxor1d
  wolfram_function: SymmetricDifference
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_numpy
  tags: [setxor, symmetric difference, set, numpy]
  description: "Symmetric set difference 集合对称差"

- python_path: numpy.isin
  wolfram_function: MemberQ
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_numpy
  tags: [isin, member, set, numpy]
  description: "Element membership test 成员测试"

- python_path: numpy.in1d
  wolfram_function: MemberQ
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_numpy
  tags: [in1d, member, numpy]
  description: "Test set membership 集合成员检测"

# ═══════════════════════════════════════════════════════
#  2. 类型检查 / 布尔逻辑
# ═══════════════════════════════════════════════════════

- python_path: numpy.all
  wolfram_function: AllTrue
  input_converter: to_wl_list
  output_converter: from_wl_scalar
  tags: [all, boolean, numpy]
  description: "Test if all elements true (WL: AllTrue) 全为真"

- python_path: numpy.any
  wolfram_function: AnyTrue
  input_converter: to_wl_list
  output_converter: from_wl_scalar
  tags: [any, boolean, numpy]
  description: "Test if any element true (WL: AnyTrue) 任一为真"

- python_path: numpy.isfinite
  wolfram_function: "Map[FiniteQ, Flatten[#]]&"
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [isfinite, finite, numpy]
  description: "Test element-wise finiteness 有限值测试"

- python_path: numpy.isinf
  wolfram_function: "Map[InfiniteQ, Flatten[#]]&"
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [isinf, infinite, numpy]
  description: "Test element-wise infinity 无穷值测试"

- python_path: numpy.isnan
  wolfram_function: "Map[MissingQ, Flatten[#]]&"
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [isnan, nan, numpy]
  description: "Test element-wise NaN NaN测试"

- python_path: numpy.isreal
  wolfram_function: "Map[RealQ, Flatten[#]]&"
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [isreal, real, numpy]
  description: "Test if element is real 实数测试"

- python_path: numpy.iscomplex
  wolfram_function: "Map[Not@*RealQ, Flatten[#]]&"
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [iscomplex, complex, numpy]
  description: "Test if element is complex 复数测试"

- python_path: numpy.isscalar
  wolfram_function: AtomQ
  input_converter: to_wl_passthrough
  output_converter: from_wl_scalar
  tags: [isscalar, scalar, numpy]
  description: "Test if scalar (WL: AtomQ) 标量测试"

- python_path: numpy.allclose
  wolfram_function: "PossibleZeroQ[Max[Abs[Flatten[#1]-Flatten[#2]]]-#3]&"
  input_converters: [to_wl_list, to_wl_list, to_wl_scalar]
  output_converter: from_wl_scalar
  tags: [allclose, tolerance, numpy]
  description: "Test if all elements close 容差全等测试"

- python_path: numpy.isclose
  wolfram_function: "Map[PossibleZeroQ, Abs[Flatten[#1]-Flatten[#2]]-#3]&"
  input_converters: [to_wl_list, to_wl_list, to_wl_scalar]
  output_converter: from_wl_numpy
  tags: [isclose, tolerance, numpy]
  description: "Element-wise closeness 逐元素容差相等"

- python_path: numpy.issubdtype
  wolfram_function: SubsetQ
  input_converter: to_wl_passthrough
  output_converter: from_wl_scalar
  tags: [issubdtype, dtype, numpy]
  description: "Test dtype subtype 类型子集测试"

# ═══════════════════════════════════════════════════════
#  3. 多项式
# ═══════════════════════════════════════════════════════

- python_path: numpy.polyfit
  wolfram_function: Fit
  input_converters: [to_wl_list, to_wl_list, to_wl_scalar]
  output_converter: from_wl_numpy
  tags: [polyfit, polynomial, regression, numpy]
  description: "Polynomial curve fitting (WL: Fit) 多项式拟合"

- python_path: numpy.polyval
  wolfram_function: "Fold[#1*x + #2&, 0, #1] /. x->#2&"
  input_converters: [to_wl_list, to_wl_scalar]
  output_converter: from_wl_scalar
  tags: [polyval, polynomial evaluate, numpy]
  description: "Evaluate polynomial at point 多项式求值"

- python_path: numpy.roots
  wolfram_function: NSolve
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [roots, polynomial roots, numpy]
  description: "Polynomial roots (WL: NSolve) 多项式根"

- python_path: numpy.polymul
  wolfram_function: "CoefficientList[Expand[FromDigits[Reverse[#1], x]*FromDigits[Reverse[#2], x]], x]&"
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_numpy
  tags: [polymul, polynomial multiply, numpy]
  description: "Multiply polynomials 多项式乘法"

- python_path: numpy.polyadd
  wolfram_function: "Thread[Plus]"
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_numpy
  tags: [polyadd, polynomial add, numpy]
  description: "Add polynomials 多项式加法"

- python_path: numpy.polyder
  wolfram_function: Differences
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [polyder, polynomial derivative, numpy]
  description: "Polynomial derivative 多项式求导"

- python_path: numpy.polyint
  wolfram_function: Accumulate
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [polyint, polynomial integral, numpy]
  description: "Polynomial integration 多项式积分"

# ═══════════════════════════════════════════════════════
#  4. 直方图 / 分箱
# ═══════════════════════════════════════════════════════

- python_path: numpy.histogram
  wolfram_function: BinCounts
  input_converters: [to_wl_list, to_wl_scalar]
  output_converter: from_wl_numpy
  tags: [histogram, bins, numpy]
  description: "Histogram bin counts (WL: BinCounts) 直方图计数"

- python_path: numpy.histogram2d
  wolfram_function: BinCounts
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_numpy
  tags: [histogram2d, 2d histogram, numpy]
  description: "2D histogram counts 二维直方图"

- python_path: numpy.histogramdd
  wolfram_function: BinCounts
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [histogramdd, nd histogram, numpy]
  description: "N-D histogram N维直方图"

- python_path: numpy.digitize
  wolfram_function: Binning
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_numpy
  tags: [digitize, bin index, numpy]
  description: "Bin index of values (WL: Binning) 分箱索引"

- python_path: numpy.bincount
  wolfram_function: Counts
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [bincount, count, numpy]
  description: "Count occurrences of integers (WL: Counts) 整数计数"

# ═══════════════════════════════════════════════════════
#  5. 窗函数
# ═══════════════════════════════════════════════════════

- python_path: numpy.hanning
  wolfram_function: "Table[HannWindow[n/Numerator[#]-1/2], {n, 0, #-1}]&"
  input_converter: to_wl_scalar
  output_converter: from_wl_numpy
  tags: [hanning, window, signal, numpy]
  description: "Hanning window (WL: HannWindow) Hanning窗"

- python_path: numpy.hamming
  wolfram_function: "Table[HammingWindow[n/Numerator[#]-1/2], {n, 0, #-1}]&"
  input_converter: to_wl_scalar
  output_converter: from_wl_numpy
  tags: [hamming, window, signal, numpy]
  description: "Hamming window (WL: HammingWindow) Hamming窗"

- python_path: numpy.blackman
  wolfram_function: "Table[BlackmanWindow[n/Numerator[#]-1/2], {n, 0, #-1}]&"
  input_converter: to_wl_scalar
  output_converter: from_wl_numpy
  tags: [blackman, window, signal, numpy]
  description: "Blackman window (WL: BlackmanWindow) Blackman窗"

- python_path: numpy.bartlett
  wolfram_function: "Table[BartlettWindow[n/Numerator[#]-1/2], {n, 0, #-1}]&"
  input_converter: to_wl_scalar
  output_converter: from_wl_numpy
  tags: [bartlett, window, signal, numpy]
  description: "Bartlett window (WL: BartlettWindow) Bartlett窗"

- python_path: numpy.kaiser
  wolfram_function: "Table[KaiserWindow[n/Numerator[#1]-1/2, #2], {n, 0, #1-1}]&"
  input_converters: [to_wl_scalar, to_wl_scalar]
  output_converter: from_wl_numpy
  tags: [kaiser, window, signal, numpy]
  description: "Kaiser window (WL: KaiserWindow) Kaiser窗"

# ═══════════════════════════════════════════════════════
#  6. 位运算
# ═══════════════════════════════════════════════════════

- python_path: numpy.bitwise_and
  wolfram_function: BitAnd
  input_converters: [to_wl_scalar, to_wl_scalar]
  output_converter: from_wl_scalar
  tags: [bitwise and, bit, numpy]
  description: "Bitwise AND (WL: BitAnd) 按位与"

- python_path: numpy.bitwise_or
  wolfram_function: BitOr
  input_converters: [to_wl_scalar, to_wl_scalar]
  output_converter: from_wl_scalar
  tags: [bitwise or, bit, numpy]
  description: "Bitwise OR (WL: BitOr) 按位或"

- python_path: numpy.bitwise_xor
  wolfram_function: BitXor
  input_converters: [to_wl_scalar, to_wl_scalar]
  output_converter: from_wl_scalar
  tags: [bitwise xor, bit, numpy]
  description: "Bitwise XOR (WL: BitXor) 按位异或"

- python_path: numpy.left_shift
  wolfram_function: BitShiftLeft
  input_converters: [to_wl_scalar, to_wl_scalar]
  output_converter: from_wl_scalar
  tags: [left shift, bit, numpy]
  description: "Left bit shift (WL: BitShiftLeft) 左移"

- python_path: numpy.right_shift
  wolfram_function: BitShiftRight
  input_converters: [to_wl_scalar, to_wl_scalar]
  output_converter: from_wl_scalar
  tags: [right shift, bit, numpy]
  description: "Right bit shift (WL: BitShiftRight) 右移"

# ═══════════════════════════════════════════════════════
#  7. 数学补充
# ═══════════════════════════════════════════════════════

- python_path: numpy.cov
  wolfram_function: Covariance
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [covariance, cov, statistics, numpy]
  description: "Covariance matrix (WL: Covariance) 协方差矩阵"

- python_path: numpy.corrcoef
  wolfram_function: Correlation
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [corrcoef, correlation, numpy]
  description: "Correlation coefficients (WL: Correlation) 相关系数矩阵"

- python_path: numpy.kron
  wolfram_function: KroneckerProduct
  input_converters: [to_wl_matrix, to_wl_matrix]
  output_converter: from_wl_numpy
  tags: [kronecker, product, numpy]
  description: "Kronecker product (WL: KroneckerProduct) Kronecker积"

- python_path: numpy.cross
  wolfram_function: Cross
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_numpy
  tags: [cross product, vector, numpy]
  description: "Cross product (WL: Cross) 向量叉积"

- python_path: numpy.outer
  wolfram_function: Outer
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_numpy
  tags: [outer product, vector, numpy]
  description: "Outer product (WL: Outer) 外积"

- python_path: numpy.inner
  wolfram_function: "Dot[#1, #2]&"
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_scalar
  tags: [inner product, dot, numpy]
  description: "Inner product 内积"

- python_path: numpy.hypot
  wolfram_function: "Sqrt[#1^2 + #2^2]&"
  input_converters: [to_wl_scalar, to_wl_scalar]
  output_converter: from_wl_scalar
  tags: [hypot, hypotenuse, numpy]
  description: "Hypotenuse (sqrt(x²+y²)) 直角三角形斜边"

- python_path: numpy.gcd
  wolfram_function: GCD
  input_converters: [to_wl_scalar, to_wl_scalar]
  output_converter: from_wl_scalar
  tags: [gcd, greatest common divisor, numpy]
  description: "Greatest common divisor (WL: GCD) 最大公约数"

- python_path: numpy.lcm
  wolfram_function: LCM
  input_converters: [to_wl_scalar, to_wl_scalar]
  output_converter: from_wl_scalar
  tags: [lcm, least common multiple, numpy]
  description: "Least common multiple (WL: LCM) 最小公倍数"

- python_path: numpy.floor_divide
  wolfram_function: Quotient
  input_converters: [to_wl_scalar, to_wl_scalar]
  output_converter: from_wl_scalar
  tags: [floor divide, integer divide, numpy]
  description: "Integer floor division (WL: Quotient) 整除"

- python_path: numpy.remainder
  wolfram_function: Mod
  input_converters: [to_wl_scalar, to_wl_scalar]
  output_converter: from_wl_scalar
  tags: [remainder, modulo, numpy]
  description: "Remainder / modulo (WL: Mod) 余数"

- python_path: numpy.mod
  wolfram_function: Mod
  input_converters: [to_wl_scalar, to_wl_scalar]
  output_converter: from_wl_scalar
  tags: [mod, modulo, numpy]
  description: "Modulo operation (WL: Mod) 取模"

- python_path: numpy.around
  wolfram_function: Round
  input_converters: [to_wl_list, to_wl_scalar]
  output_converter: from_wl_numpy
  tags: [around, round, numpy]
  description: "Round to given decimals (WL: Round) 四舍五入"

- python_path: numpy.fix
  wolfram_function: "Map[If[#>=0, Floor[#], Ceiling[#]]&, Flatten[#]]&"
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [fix, truncate, integer, numpy]
  description: "Truncate toward zero 向零截断"

- python_path: numpy.count_nonzero
  wolfram_function: "Length[Select[Flatten[#], #!=0&]]&"
  input_converter: to_wl_list
  output_converter: from_wl_scalar
  tags: [count nonzero, count, numpy]
  description: "Count non-zero elements 非零元素计数"

- python_path: numpy.average
  wolfram_function: WeightedMean
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_scalar
  tags: [average, weighted mean, numpy]
  description: "Weighted average (WL: WeightedMean) 加权平均"

- python_path: numpy.percentile
  wolfram_function: Quantile
  input_converters: [to_wl_list, to_wl_scalar]
  output_converter: from_wl_scalar
  tags: [percentile, quantile, statistics, numpy]
  description: "Percentile (WL: Quantile) 百分位数"

- python_path: numpy.nanmean
  wolfram_function: "Mean[Select[Flatten[#], Not@*MissingQ]]&"
  input_converter: to_wl_list
  output_converter: from_wl_scalar
  tags: [nanmean, nan, mean, numpy]
  description: "Mean ignoring NaN 忽略NaN的均值"

- python_path: numpy.nanstd
  wolfram_function: "StandardDeviation[Select[Flatten[#], Not@*MissingQ]]&"
  input_converter: to_wl_list
  output_converter: from_wl_scalar
  tags: [nanstd, nan, std, numpy]
  description: "Std ignoring NaN 忽略NaN的标准差"

- python_path: numpy.nansum
  wolfram_function: "Total[Select[Flatten[#], Not@*MissingQ]]&"
  input_converter: to_wl_list
  output_converter: from_wl_scalar
  tags: [nansum, nan, sum, numpy]
  description: "Sum ignoring NaN 忽略NaN的求和"

- python_path: numpy.nanmax
  wolfram_function: "Max[Select[Flatten[#], Not@*MissingQ]]&"
  input_converter: to_wl_list
  output_converter: from_wl_scalar
  tags: [nanmax, nan, max, numpy]
  description: "Max ignoring NaN 忽略NaN的最大值"

- python_path: numpy.nanmin
  wolfram_function: "Min[Select[Flatten[#], Not@*MissingQ]]&"
  input_converter: to_wl_list
  output_converter: from_wl_scalar
  tags: [nanmin, nan, min, numpy]
  description: "Min ignoring NaN 忽略NaN的最小值"

# ═══════════════════════════════════════════════════════
#  8. 高级数组操作
# ═══════════════════════════════════════════════════════

- python_path: numpy.pad
  wolfram_function: "PadLeft[PadRight[#, Length[#]+#2], Length[#]+#2+#3]&"
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [pad, padding, numpy]
  description: "Pad array (WL: PadLeft/PadRight) 填充数组"

- python_path: numpy.tile
  wolfram_function: "Nest[Join[#, #]&, #1, Log2[#2]]&"
  input_converters: [to_wl_list, to_wl_scalar]
  output_converter: from_wl_numpy
  tags: [tile, repeat, numpy]
  description: "Tile array (WL: ArrayPad/Join) 平铺数组"

- python_path: numpy.repeat
  wolfram_function: "Flatten[Map[ConstantArray[#, #2]&, #1]]&"
  input_converters: [to_wl_list, to_wl_scalar]
  output_converter: from_wl_numpy
  tags: [repeat, replicate, numpy]
  description: "Repeat array elements 重复数组元素"

- python_path: numpy.delete
  wolfram_function: Delete
  input_converters: [to_wl_list, to_wl_scalar]
  output_converter: from_wl_numpy
  tags: [delete, remove, numpy]
  description: "Delete elements at indices (WL: Delete) 按索引删除"

- python_path: numpy.insert
  wolfram_function: Insert
  input_converters: [to_wl_list, to_wl_scalar, to_wl_scalar]
  output_converter: from_wl_numpy
  tags: [insert, add, numpy]
  description: "Insert values at indices (WL: Insert) 按索引插入"

- python_path: numpy.searchsorted
  wolfram_function: "BinarySearch[#1, #2]&"
  input_converters: [to_wl_list, to_wl_scalar]
  output_converter: from_wl_scalar
  tags: [searchsorted, binary search, numpy]
  description: "Sorted insertion index (WL: BinarySearch) 二分查找插入位置"

- python_path: numpy.trim_zeros
  wolfram_function: "DeleteCases[#, 0]&"
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [trim zeros, strip, numpy]
  description: "Trim leading/trailing zeros 去除首尾零"

- python_path: numpy.extract
  wolfram_function: Pick
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_numpy
  tags: [extract, pick, numpy]
  description: "Extract elements by condition (WL: Pick) 条件提取"

- python_path: numpy.compress
  wolfram_function: Pick
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_numpy
  tags: [compress, pick, numpy]
  description: "Compress array with boolean mask (WL: Pick) 布尔掩码压缩"

- python_path: numpy.take
  wolfram_function: Extract
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_numpy
  tags: [take, index, numpy]
  description: "Take elements along axis (WL: Extract) 按索引取元素"

- python_path: numpy.argsort
  wolfram_function: Ordering
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [argsort, sort indices, numpy]
  description: "Indices that sort array (WL: Ordering) 排序索引"

- python_path: numpy.argpartition
  wolfram_function: Ordering
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [argpartition, partial sort, numpy]
  description: "Partial sort indices 部分排序索引"

- python_path: numpy.linalg.matrix_rank
  wolfram_function: MatrixRank
  input_converter: to_wl_matrix
  output_converter: from_wl_scalar
  tags: [rank, matrix rank, linalg, numpy]
  description: "Matrix rank (WL: MatrixRank) 矩阵秩"

- python_path: numpy.linalg.cond
  wolfram_function: "Norm[#]*Norm[Inverse[#]]&"
  input_converter: to_wl_matrix
  output_converter: from_wl_scalar
  tags: [condition number, matrix, linalg, numpy]
  description: "Matrix condition number 矩阵条件数"

- python_path: numpy.linalg.pinv
  wolfram_function: PseudoInverse
  input_converter: to_wl_matrix
  output_converter: from_wl_numpy
  tags: [pseudoinverse, pinv, linalg, numpy]
  description: "Moore-Penrose pseudoinverse 伪逆"

- python_path: numpy.linalg.lu
  wolfram_function: LUDecomposition
  input_converter: to_wl_matrix
  output_converter: from_wl_json
  tags: [lu decomposition, linalg, numpy]
  description: "LU decomposition LU分解"

- python_path: numpy.linalg.matrix_power
  wolfram_function: MatrixPower
  input_converters: [to_wl_matrix, to_wl_scalar]
  output_converter: from_wl_numpy
  tags: [matrix power, linalg, numpy]
  description: "Matrix power (WL: MatrixPower) 矩阵幂"

- python_path: numpy.linalg.slogdet
  wolfram_function: "Log[Abs[Det[#]]]&"
  input_converter: to_wl_matrix
  output_converter: from_wl_scalar
  tags: [slogdet, log det, linalg, numpy]
  description: "Log of determinant sign+log|det| 行列式对数"

- python_path: numpy.linalg.multi_dot
  wolfram_function: "Fold[Dot, First[#], Rest[#]]&"
  input_converter: to_wl_list
  output_converter: from_wl_numpy
  tags: [multi dot, chain matmul, linalg, numpy]
  description: "Efficient multi-matrix product 多矩阵连乘"

- python_path: numpy.linalg.tensorsolve
  wolfram_function: TensorSolve
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_numpy
  tags: [tensorsolve, tensor, linalg, numpy]
  description: "Solve tensor equation (WL: TensorSolve) 张量方程求解"

- python_path: numpy.trapz
  wolfram_function: "Total[Differences[#2]*MovingAverage[#1, 2]]&"
  input_converters: [to_wl_list, to_wl_list]
  output_converter: from_wl_scalar
  tags: [trapz, trapezoidal, integration, numpy]
  description: "Trapezoidal integration (WL: sum of trapezoids) 梯形积分"
